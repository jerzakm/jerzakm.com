<script lang="ts">
	import { copyTextToClipboard } from '$lib/util';

	let emailButton;
</script>

<contact>
	<contactDetails>
		<h1>
			There's going to be something much more interesting here soon. In the meanwhile hit me up at
		</h1>

		<email class="email" bind:this={emailButton}>
			hey@jerzakm.com
			<button
				class="copy-email-button"
				on:click={() => {
					copyTextToClipboard('hey@jerzakm.com');
					emailButton.animate(
						{
							transformOrigin: '50% 100%',
							transform: [
								'rotate(0deg)',
								'rotate(2deg)',
								'rotate(-4deg)',
								'rotate(4deg)',
								'rotate(-2deg)',
								'rotate(2deg)',
								'rotate(0)'
							],
							easing: ['ease-in', 'ease-out']
						},
						500
					);
				}}
			>
				<svg class="copy-icon" viewBox="0 0 20 20">
					<path
						fill="none"
						d="M18.378,1.062H3.855c-0.309,0-0.559,0.25-0.559,0.559c0,0.309,0.25,0.559,0.559,0.559h13.964v13.964
								c0,0.309,0.25,0.559,0.559,0.559c0.31,0,0.56-0.25,0.56-0.559V1.621C18.938,1.312,18.688,1.062,18.378,1.062z M16.144,3.296H1.621
								c-0.309,0-0.559,0.25-0.559,0.559v14.523c0,0.31,0.25,0.56,0.559,0.56h14.523c0.309,0,0.559-0.25,0.559-0.56V3.855
								C16.702,3.546,16.452,3.296,16.144,3.296z M15.586,17.262c0,0.31-0.25,0.558-0.56,0.558H2.738c-0.309,0-0.559-0.248-0.559-0.558
								V4.972c0-0.309,0.25-0.559,0.559-0.559h12.289c0.31,0,0.56,0.25,0.56,0.559V17.262z"
					/>
				</svg>
			</button>
		</email>
	</contactDetails>
</contact>

<style>
	email {
		font-size: calc(1rem + 0.5vmax);
		font-weight: bold;
		border-radius: 1vmax;
		padding: 0.8rem 1rem;
		margin: 1rem;
		display: flex;
		background-color: unset;
		position: relative;
		border: 2px solid black;
		transition: 0.5s;
	}

	email:after {
		position: absolute;
		content: '';
		height: 3px;
		bottom: 0.6rem;

		margin: 0 auto;
		left: 0;
		right: 0;
		width: 80%;
		background: var(--accent-color);
		transition: 0.5s;
	}
	email:hover:after {
		width: 90%;
		height: 6px;
	}

	email:hover {
		background-color: var(--text-color);
		color: var(--primary-color);
	}

	email:hover path {
		fill: var(--primary-color);
	}

	.copy-email-button {
		background: unset;
		border: 0;
		transition: 0.5s;
		position: relative;
		z-index: 11;
		cursor: pointer;
	}

	.copy-email-button:hover:after {
		position: absolute;
		bottom: 0px;
		content: 'Copy email to clipboard';
		background-color: var(--primary-color);
		color: var(--text-color);
		min-width: 100px;
		border: 2px solid var(--text-color);
	}

	.copy-email-button:hover {
		transform: scale(1.2) rotate(15deg);
	}

	.copy-icon {
		width: 2vmax;
		height: 2vmax;
	}

	.copy-icon path {
		fill: var(--text-color);
	}
	contact {
		flex: 1;
		display: flex;
		flex-direction: column;
		align-items: center;
	}
	contactDetails {
		max-width: 60%;
		text-align: center;
		display: flex;
		flex-direction: column;
		align-items: center;
	}
</style>
